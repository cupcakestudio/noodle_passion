<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Slab:wght@100;200;300;400;500;600;700&family=M+PLUS+Rounded+1c:wght@100;300;400;500;700;800;900&display=swap" rel="stylesheet" />
    <title>Slurp</title>
    <style>
      img {
        width: 100%;
      }

      main {
        margin: 50px;
      }

      h1 {
        font-family: "Josefin Slab", serif;
        font-weight: 700;

        font-size: 1.3;
        text-align: center;
      }

      article {
        display: grid;
        padding-top: 40px;
      }

      /* Placerer ramenNavn oven på ramenbillede*/

      .ramenbillede,
      .ramenNavn {
        grid-area: 1/1;
      }

      .ramenNavn {
        place-self: center center;
        z-index: 1;
        color: white;
        font-family: "M PLUS Rounded 1c", sans-serif;
        text-transform: uppercase;
        font-weight: 900;
        text-shadow: 5px 5px black;
      }

      /* Grayscale og hover på ramenbillede */

      article{
        filter: grayscale(50);
      }

      article:hover {
        filter: none;
      }

      /* Styling af knapper i filtrerings menu */

      button {
        border: none;
        background: none;
        font-family: "Josefin Slab";
      }

      .filteringsknapper {
        text-decoration: 1px underline;
        font-size: 1.1rem;
      }

      .filteringsknapper_lokation {
        display: flex;
        justify-content: center;
      }

      /* Placerer logo oven på splashbillede */

      .splash {
        display: grid;
        width: 100%;

      }

      .splash_billede,
      .logo {
        grid-area: 1/1;
      }

      .splash_billede {
        filter: grayscale(50);
        place-self: center center;
        aspect-ratio: 2000/800;
      }

      .logo {
        place-self: center center;
        z-index: 1;
        max-width: 30%;
      }

      /* Styling af header */

      .logo_header {
        width: 8%;
        margin-right: 0 auto;
      }

      .header_menu {
        padding-bottom: 10px;
        font-size: 2rem;
      }

      .header_menu button {
        font-size: 2rem;
        padding-left: 17px;
        text-decoration: underline;
      }
      #om_os {
        text-decoration: none;
        font-size: 1.4rem;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
      }

      /* Sitet tilpasses forskellige media */

      @media (min-width: 700px) {
        main {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          grid-gap: 40px;
        }

        .filteringsknapper {
          font-size: 1.3rem;
          padding-left: 15px;
        }

        article {
          padding-top: 0;
        }
        .overskrift_forside,
        .filteringsknapper_lokation {
          grid-column: 1 / span 2;
        }

/* POPUP STYLING */
 
#popup {
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  background-color: rgba(3, 3, 3, 0.702);
  display: none;
  justify-content: center;
  overflow: scroll;
  z-index: 2;
}
.billede_popup {
  width: 50%;

}

#luk {
  position: absolute;
  left: 90%;
  display: flex;
  /*  padding: 1em; */
  font-size: 1.7rem;
  font-weight: bolder;
  color: rgb(0, 0, 0);
  cursor: pointer;
  /* display: flex; */
  z-index: 2;
}

#popup article {
  position: fixed;
  align-self: center;
  width: 55%;
  max-width: 875px;
  background-color: white;
  padding: 2rem;
}

      }
      @media (min-width: 1000px) {
        main {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          grid-gap: 40px;
        }
        article {
          padding-top: 0;
        }
        .overskrift_forside,
        .filteringsknapper_lokation {
          grid-column: 1 / span 3;
        }
        #popup {
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  background-color: rgba(3, 3, 3, 0.702);
  display: none;
  justify-content: center;
  overflow: scroll;
  z-index: 2;
}
      }

/* POPUP I MOBIL */
      body {
  background-image: url(/billeder/noodle_background_blue.svg);
  height: 100vh;
  max-width: 100%;
  /* background-repeat: no-repeat; */
  /* aspect-ratio: 2525/5092; */
  background-size: cover;
}
#popup {
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  background-color: rgba(3, 3, 3, 0.702);
  display: none;
  justify-content: center;
  overflow: scroll;
  z-index: 2;
}
.billede_popup {
  width: 100%;
}

#luk {
  position: absolute;
  left: 90%;
  display: flex;
  /*  padding: 1em; */
  font-size: 1.7rem;
  font-weight: bolder;
  color: rgb(0, 0, 0);
  cursor: pointer;
  /* display: flex; */
  z-index: 2;
}

#popup article {
  position: fixed;
  align-self: center;
  background-color: #e5e1db;
  padding: 2rem;
}

.overskrift_popup {
  text-align: center;
}

/* BURGERMENU */
.toggle-btn {
  background: transparent;
  border: none;
  min-width: 44px;
  min-height: 44px;
  font-size: 1.1rem;
  cursor: pointer;

  /* Skjuler menu-knappen når den ikke er trykket på */
  display: none;
}

@media (max-width: 600px) {
  .toggle-btn {
    /* Viser knap i mobilformat = 600px */
    display: block;
    margin-left: auto;
  }

  .header_menu {
    /* Fjerner den anden header_menu.header_menu når burgerheader_menu.header_menuen vises, men viser stadig børnene */
    display: contents;
  }

  .header_menu ul {
    /* Fjerner header_menu.header_menupunkterne når burger-header_menu.header_menuen ikke bliver vist */
    display: none;
  }

  .header_menu.shown ul {
    /* Vis header_menu.header_menupunkterne, når klassen ".shown" er til stede */
    border-top: 1px solid #000;

    padding-top: 1rem;
    display: flex;
    flex: 1 1 100%;
    flex-flow: column;
  }
  .header_menu.shown ul li {
    /* Vis header_menu.header_menu-listen, når klassen ".shown" er til stede */
    flex-flow: column;
    margin-left: auto;
  }
}

    </style>
  </head>
  <body>

    <!--   navigations button -->
    <header>
      <img class="logo_header" src="billeder/logo_3.svg" alt="logo" class="logo" />
      <nav class="header_menu">
        <button data-by="aarhus">Aarhus</button>
        <button data-by="kbh" class="vælg">København</button>
        <button data-by="odense">Odense</button>
        <button id="om_os">OM OS</button>
      </nav>
    </header>
    <div class="splash">
      <img class="logo" src="billeder/logo_3.svg" alt="logo" class="logo" />
      <img class="splash_billede" src="billeder/splash_noodle1.webp" alt="splash_rotate" />
    </div>
    <main>
      <div class="overskrift_forside">
        <h1 id="filterBy"></h1>
        <h1>Favoritter og anbefalinger</h1>
      </div>
      <!-- filteringsknapper -->
      <section class="filteringsknapper_lokation">
      
        <button class="filteringsknapper">Billige</button>
        <button class="filteringsknapper">Mindre Billige</button>
        <button class="filteringsknapper">Bedst Rated</button>
      </section>
    </main>
    <div id="popup">
      <article>
         <div id="luk">&#x2715</div>
        <h2 class="overskrift_popup">Ramen</h2>
        <img src="" alt="" class="billede_popup"/>
        <p></p>
        <address></address>
        <a href=""></a>
      </article>
    </div>
  
    <!-- skabelon for ramen butikker article -->
    <template>
      <article>
        
        <h2 class="ramenNavn"></h2>
        <img src="" alt="" class="ramenbillede" />
      </article>
    </template>
  </body>

  <script>
    // adgang til databasen
    const url = "https://noodleslurpt7-2a38.restdb.io/rest/noodleplaces";

    const options = {
      headers: { "x-apikey": "631eeef8fdc15b0265f172fa" }, //API KEY
    };

    //load script når DOM load er færdig
    document.addEventListener("DOMContentLoaded", start);
    //globale variabler
    let jsonData;
    let filterBydel = "kbh";

  function start(){
    const byfiltermulighed = document.querySelectorAll("nav button"); // hent nav button bydel knap
    //const filtermulighed = document.querySelectorAll("section button"); 
    byfiltermulighed.forEach(knap => knap.addEventListener("click", filterBy));//tilknyt funktionskald på filterknap for hver bydels knap
    //filtermulighed.forEach(knap => knap.addEventListener("click", filtering));//tilknyt funktionskald på filterknap for hver bydels knap
    hentRamenData();
  }



  function filterBy(){
    console.log("mig");
    filterBydel = this.dataset.by;
    document.querySelector(".vælg").classList.remove("vælg");
    this.classList.add("vælg");
    visRamen();
  }
    //hent dataen
    async function hentRamenData() {
      const respons = await fetch(url, options);
      jsonData = await respons.json();
      visRamen();
    }
    //setup af fullview loop på forsiden
    function visRamen() {

      const main = document.querySelector("main");
      const skabelon = document.querySelector("template").content;
      main.innerHTML = "<div class='overskrift_forside'><h1 id='filterBy'></h1><h1>Favoritter og anbefalinger</h1></div><!-- filteringsknapper --><section class='filteringsknapper_lokation'><button class='filteringsknapper'>Billige</button><button class='filteringsknapper'>Mindre Billige</button><button class='filteringsknapper'>Bedst Rated</button></section>";

      //put data fra jsonDatabasen ind i skabelon og put det ind i main for hvert element i databasen
      jsonData.forEach((ramen) => {

          //filtrér efter bydel eller deafult efter rating 
      if (filterBydel == ramen.By ){  
          const clone = skabelon.cloneNode(true);
          clone.querySelector("h2").textContent = ramen.Navn;
          clone.querySelector("img").src = "billeder/" + ramen.Billede + ".webp";
          clone.querySelector("article").addEventListener("click", () => visRestaurant(ramen)); 
          main.appendChild(clone);
     
      }
      
    })
    }  
      // popup funktionen
    

      function visRestaurant(ramen) {
        console.log("visRestaurant");
        const popup = document.querySelector("#popup");
        popup.style.display = "flex";
        popup.querySelector("img").src = "billeder/" + ramen.Billede + ".webp";
        popup.querySelector("h2").textContent = ramen.Navn;
        popup.querySelector("p").textContent = ramen.Beskrivelse;
        popup.querySelector("address").textContent = ramen.Adresse;
        popup.querySelector("a").textContent = ramen.Link;
        // popup.addEventListener("click", () => (popup.style.display = "none")); 
         document.querySelector("#luk").addEventListener("click", () => (popup.style.display = "none"));
      }
    
    hentRamenData();


    /* BURGERMENU */
// En variabel som vi kan referer til som toggle-btn senere
const btn = document.querySelector(".toggle-btn");

const burgermenu_img = document.querySelector(".burgermenu_img");
// Variabel til ".main-menu"
const menu = document.querySelector(".header_menu");

// Funktion kaldet togglemenu
function toggleMenu() {
  // ClassList.toggle gør at menu at der sker noget når klassen bliver vist (shown)
  menu.classList.toggle("shown");

  // Variablen menuShown skal indeholde shown -brug ClassList contains
  const menuShown = menu.classList.contains("shown");

  // Bruger if sætning til at spørge om funktionen er shown eller ej
  if (menuShown) {
    console.log(menuShown);

    burgermenu_img.src = "kryds.svg";
    //hvis der bliver trykket på knappen så den toggler bliver billedet af krydset vist
  } else {
    console.log(menuShown);

    //  bliver til burgermenu ikonet igen hvis menuShown ikke er til stede (false)
    burgermenu_img.src = "burger_ikon.svg";
  }
}

// lytter efter klik til "knappen" menu. dette starter funktionen
btn.addEventListener("click", toggleMenu);

  </script>
</html>